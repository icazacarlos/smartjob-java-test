sonarqube {
  properties {
    property "sonar.projectKey", "icazacarlos_virtual-threads-j21"
    property "sonar.sourceEncoding", "UTF-8"
    property "sonar.java.source", "21"
    property "sonar.java.enablePreview", "false"
    property "sonar.scm.disabled", "true"
    property "sonar.scm.provider", "git"
    property "sonar.sensor.cache.project.enable", "true"
    property "sonar.docker.hadolint.reportPaths", "build/reports/hadolint/hadolint-report.json"
    //sonar.java.checkstyle.reportPaths
    //sonar.java.pmd.reportPaths
    property "sonar.qualitygate.wait", "true"
    property "sonar.qualitygate.timeout", "600"

    property "sonar.coverage.jacoco.xmlReportPaths", "${buildDir}/reports/jacoco/test/jacocoTestReport.xml"
    property "sonar.sources", "src/main/java"
    //property "sonar.tests", "src/test/java"
    
    property "sonar.java.binaries", "${buildDir}/classes/java/main"
    //property "sonar.junit.reportPaths", "${buildDir}/test-results/test"

    property "sonar.java.checkstyle.reportPaths", "${buildDir}/reports/checkstyle/main.xml,${buildDir}/reports/checkstyle/test.xml"

    property "sonar.host.url", "https://sonarcloud.io"
    property "sonar.organization", "icazacarlos"
  }
}

tasks.named("sonar").configure {
  notCompatibleWithConfigurationCache("SonarScanner for Gradle is not CC-compatible yet")
  enabled = false
}
