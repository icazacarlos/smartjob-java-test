tasks.named("build").configure {
  mustRunAfter("clean")
}

tasks.named("check").configure {
  dependsOn("hadolint")
  dependsOn("grype")
  dependsOn("sonar")
}

tasks.named("jar").configure {
  dependsOn "check"
}

tasks.named("test").configure {
  finalizedBy "jacocoTestReport"
}

tasks.named("sonar").configure {
  dependsOn("jacocoTestReport")
  dependsOn("checkstyleMain", "checkstyleTest")
  dependsOn("spotbugsMain", "spotbugsTest")
}
